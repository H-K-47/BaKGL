Dialog is referenced by keys e.g.
Squire Phillip:
2dc6d3

not sure how a dialog file is selected (DIAL_Zxx.DDX) but it should be easy enough to cache all the keys (assuming no overlaps)

The keys then map to a control block:

e.g. DIAL_Z30.DDX@92
Key
----------
D3 C6 2D 00 1F 09 00 00
            ----------
             Offset in file

Squire Phillip
control block @9f1 must end @9a8

00000910: 00eb c62d 8004 00b8 1e00 0000 0001 0000  ...-............
00000920: 0000 1000 0500 0000 3775 0100 0100 62d8  ........7u....b.
00000930: 0100 3775 0200 0200 96e3 0100 3775 0300  ..7u........7u..
00000940: 0600 a0ea 0100 3775 0700 0700 ccf3 0100  ......7u........
00000950: 0000 0000 0000 5a09 0000 0000 0010 0001  ......Z.........
00000960: 0000 0000 0000 0000 00eb c62d 8000 0000  ...........-....
00000970: 1000 0101 0000 0000 0000 0000 ebc6 2d80  ..............-.
00000980: 0400 b91e 0000 0000 0100 0000 0010 0005  ................

0000 0010 0005 00 0000 
3775 0100 0100 62d8 0100 
3775 0200 0200 96e3 0100 
3775 0300 0600 a0ea 0100 
3775 0700 0700 ccf3 0100 
0000 0000 0000 5a09 0000 
0000 0010 0001 0000 0000
0000 0000 00eb c62d 8000
0000 1000 0101 0000 0000
0000 0000 ebc6 2d80 0400 b91e 0000 0000 0100 


first node
@1d862
00 0000 1000 

0200 0000
b9 1e 01 00
ff ff
51 e1 01 00 0000 0000 0000 // end
7f d8 01 00
00 0000 1000 0101 0000 0000 0000 0000
9c d8 01 00
0c00 1104 0000 0000 0000 0600 0010  0001
02 79 02 00 0000000000
3c db 01 0000 0000 0000 0000 0000 000c 0080 0001 0000  
0000 0009 

536f 6d65 6f6e 6520 7761 7320  ....Someone was 
6361 6c6c 696e 672e 0a09 5265 636f 676e  calling...Recogn




DIAL_Z00.DDX
         || 14 - 1 auto play flag | 4 justification/style (0 normal, 2 fill screen (large text)) 4 justify center
00 00 00 14
60 00 01 3A
00 06 00 3C 00 23 00 C8 00
LENGTH 55
37 00
TEXT FROM HERE
4C 65 66 74 20 63 6C 69 63 6B 20 74 6F 20 73 61 76 65 20 42 6F 6F 6B 6D 61 72 6B 20 66 69 6C 65 2E 0A 0A 52 69 67 68 74 20 63 6C 69 63 6B 20 74 6F 20 63 61 6E 63 65 6C 2E
Left click to save Bookmark file.\n\nRight click to cancel.
----------------------
00 00 00 1C
20 00 01 14
00 06 00 3C 00 23 00 C8 00
37 00 -- Length? But the length is too long here...
42 6F 6F 6B 6D 61 72 6B 20 63 61 6E 63 65 6C 6C 65 64 2E
Bookmark cancelled.

-----------------------
00 00 00 14
60 00 01 13
00 06 00 3C 00 23 00 C8 00
37 00 -- don't think this is length anymore
53 61 76 69 6E 67 20 42 6F 6F 6B 6D 61 72 6B 2E 2E 2E 00
Saving Bookmark....

----------------------- 0x147 - 0x97c Crenard battle intro
00 00 00 10
00 03 00 00
00 30 75 00
0x9a3 offset to 1st
00 00 00 A3 09 00
00 30 75 01
// 0xa71 offset to 2nd
00 01 00 71 0A 00

00 00 00 00
// oxbc1 offset to 3rd dialog
00 00 00 C1 0B 00
-- This is address 9a3
00 00 00 00 50 00 00 00 C5 00
 0x00c5 == 197 bytes length of string
The mercenary had been uprepared ... Crenard
09 54 68 65 20 6D 65 72 63 65 6E 61 72 79 20 68 61 64 20 62 65 65 6E 20 75 6E 70 72 65 70 61 72 65 64 2E 0A 09 53 74 75 6D 62 6C 69 6E 67 20 61 63 72 6F 73 73 20 74 68 65 20 73 74 6F 6E 79 20 67 72 6F 75 6E 64 2C 20 68 61 6C 66 20 64 72 75 6E 6B 20 6F 6E 20 77 69 6E 65 2C 20 68 65 20 66 75 6D 62 6C 65 64 20 66 6F 72 20 68 69 73 20 77 65 61 70 6F 6E 2E 20 22 59 6F 75 27 6C 6C 20 62 65 20 73 6F 72 72 79 20 74 68 65 20 64 61 79 20 79 6F 75 20 63 72 6F 73 73 65 64 20 43 72 65 6E 61 72 64 2C 22 20 68 65 20 73 70 61 74 20 61 73 20 40 34 20 61 64 76 61 6E 63 65 64 20 6F 6E 20 68 69 6D 2E 00

00 00 00 50 00 00 00 47 01
-- 0x147
09 54 68 65 20 6D 65 72 63 65 6E 61 72 79 20 6C 61 75 67 68 65 64 2E 0A 09 48 61 76 69 6E 67 20 68 65 61 72 64 20 74 68 65 69 72 20 63 6C 75 6D 73 79 20 61 64 76 61 6E 63 65 2C 20 68 65 20 74 6F 6F 6B 20 61 20 6C 61 73 74 20 73 77 69 6C 6C 20 66 72 6F 6D 20 61 20 62 6F 74 74 6C 65 20 6F 66 20 61 6C 63 6F 68 6F 6C 20 62 65 66 6F 72 65 20 74 68 72 6F 77 69 6E 67 20 69 74 20 61 73 69 64 65 2E 20 22 57 65 27 76 65 20 67 6F 74 20 75 73 20 61 20 6E 69 63 65 20 61 72 72 61 6E 67 65 6D 65 6E 74 20 68 65 72 65 2C 22 20 68 65 20 73 61 69 64 2E 20 22 4D 65 20 61 6E 64 20 74 68 65 20 69 6E 6E 6B 65 65 70 65 72 20 61 74 20 74 68 65 20 52 69 76 65 72 20 50 69 6C 6F 74 27 73 20 46 6F 6C 6C 79 2E 20 54 6F 6F 20 62 61 64 20 79 6F 75 27 76 65 20 64 65 63 69 64 65 64 20 74 6F 20 6D 75 63 6B 20 61 62 6F 75 74 20 77 69 74 68 20 6D 65 2E 20 59 6F 75 27 6C 6C 20 62 65 20 73 6F 72 72 79 20 79 6F 75 20 63 72 6F 73 73 65 64 20 73 77 6F 72 64 73 20 77 69 74 68 20 43 72 65 6E 61 72 64 21 22 00

00 00 00 50 00 00 00 37 01

09 40 34 20 68 65 61 72 64 20 61 20 62 65 6C 63 68 2E 0A 09 41 68 65 61 64 20 6F 66 20 74 68 65 6D 2C 20 61 20 6D 65 72 63 65 6E 61 72 79 20 74 6F 6F 6B 20 61 20 6C 61 73 74 20 73 77 69 6C 6C 20 66 72 6F 6D 20 61 20 62 6F 74 74 6C 65 20 6F 66 20 61 6C 63 6F 68 6F 6C 20 62 65 66 6F 72 65 20 74 68 72 6F 77 69 6E 67 20 69 74 20 61 73 69 64 65 2E 20 22 57 65 27 76 65 20 67 6F 74 20 75 73 20 61 20 6E 69 63 65 20 61 72 72 61 6E 67 65 6D 65 6E 74 20 68 65 72 65 2C 22 20 68 65 20 73 61 69 64 2E 20 22 4D 65 20 61 6E 64 20 74 68 65 20 69 6E 6E 6B 65 65 70 65 72 20 61 74 20 74 68 65 20 52 69 76 65 72 20 50 69 6C 6F 74 27 73 20 46 6F 6C 6C 79 2E 20 54 6F 6F 20 62 61 64 20 79 6F 75 27 76 65 20 64 65 63 69 64 65 64 20 74 6F 20 6D 75 63 6B 20 61 62 6F 75 74 20 77 69 74 68 20 6D 65 2E 20 59 6F 75 27 6C 6C 20 62 65 20 73 6F 72 72 79 20 79 6F 75 20 63 72 6F 73 73 65 64 20 73 77 6F 72 64 73 20 77 69 74 68 20 43 72 65 6E 61 72 64 21 22 00

-------------------- key 0x136 - 0xdd4 Qugeian battle
         || 1/5 auto play flag
00 00 00 50 00 00 01 4D 01
                  || Seems to indicate more text info after
-- indicates the type of text too play after? 
01 seems to be index? No addresses here..
08 00 01 00 | 01 00 4B 00 | 4B 00
Text begins here
09 54 68 65 20 6D 65 6E 20 63 68 61 72 67 65 64 20 74 68 65 6D 2E 0A 09 57 69 74 68 64 72 61 77 69 6E 67 20 73 74 72 61 6E 67 65 20 70 61 63 6B 73 20 66 72 6F 6D 20 74 68 65 69 72 20 74 75 6E 69 63 73 2C 20 74 68 65 79 20 70 65 6C 74 65 64 20 40 35 20 61 6E 64 20 40 33 20 77 69 74 68 20 67 6C 6F 62 73 20 6F 66 20 6D 61 74 65 72 69 61 6C 20 74 68 61 74 20 73 6D 65 6C 6C 65 64 20 74 65 72 72 69 62 6C 79 2E 20 43 6F 6E 66 75 73 65 64 20 61 74 20 66 69 72 73 74 2C 20 40 35 20 65 78 61 6D 69 6E 65 64 20 74 68 65 20 6D 61 74 65 72 69 61 6C 2C 20 74 68 65 6E 20 72 65 61 6C 69 7A 65 64 20 77 68 61 74 20 77 61 73 20 68 61 70 70 65 6E 69 6E 67 2E 0A 09 22 49 74 27 73 20 61 20 51 75 65 67 69 61 6E 20 62 61 74 74 6C 65 20 74 61 63 74 69 63 21 22 20 40 34 20 73 68 6F 75 74 65 64 2E 20 22 54 68 65 79 27 72 65 20 74 68 72 6F 77 69 6E 67 20 64 69 73 65 61 73 65 20 69 6E 66 65 63 74 65 64 20 6D 75 6C 63 68 21 20 57 65 27 76 65 20 67 6F 74 20 74 6F 20 74 61 6B 65 20 74 68 65 6D 20 64 6F 77 6E 21 22 00

Plays immediately after quegian battle
-------------------- key 0x146 - 0xea65 - generic plagued
00 00 00 10
00 00 00 0F 01
09 4E 6F 20 6F 6E 65 20 77 69 73 68 65 64 20 74 6F 20 73 70 65 61 6B 20 61 62 6F 75 74 20 69 74 2E 0A 09 53 65 65 69 6E 67 20 74 68 65 20 67 6C 61 7A 65 64 20 6C 6F 6F 6B 73 20 69 6E 20 65 61 63 68 20 6F 74 68 65 72 27 73 20 65 79 65 73 20 61 6E 64 20 73 69 63 6B 6C 79 20 70 61 6C 6C 6F 72 20 65 61 63 68 20 68 61 64 20 62 65 67 75 6E 20 74 6F 20 65 78 68 69 62 69 74 2C 20 69 74 20 77 61 73 20 6D 6F 72 65 20 74 68 61 6E 20 6F 62 76 69 6F 75 73 20 74 68 65 79 20 68 61 64 20 66 61 6C 6C 65 6E 20 70 72 65 79 20 74 6F 20 61 20 76 69 72 75 6C 65 6E 74 20 70 6C 61 67 75 65 2E 20 53 69 6C 65 6E 74 6C 79 2C 20 40 34 20 68 6F 70 65 64 20 74 68 65 79 20 77 6F 75 6C 64 20 72 65 61 63 68 20 61 20 74 65 6D 70 6C 65 20 73 6F 6F 6E 20 62 65 66 6F 72 65 20 74 68 65 79 20 61 6C 6C 20 64 69 65 64 20 6F 66 20 69 74 2E
